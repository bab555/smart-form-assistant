# 02. UI/UX 设计与交互文档 (UI/UX Design Specification)

## 1. 总体布局设计 (Layout)
采用 **三栏式沉浸布局 (Three-Column Immersive Layout)**，从左至右分别代表“交互-思考-结果”。

### 1.1 左栏：智能交互区 (Interaction Panel) - 25%
*   **隐喻**: “助理的对话窗口”。
*   **组件**:
    *   **Chat Stream**: 类似 ChatGPT 的对话流。显示用户的语音转文字结果、Agent 的提问（“请问是牛肉面还是粉？”）。
    *   **Input Area**: 底部常驻。
        *   **大号麦克风按钮**: 按住说话 (Push-to-Talk)。
        *   **上传按钮**: 图片上传。
        *   **文本框**: 备用文字输入。

### 1.2 中栏：思维可视化区 (Visual Reasoning Flow) - 35%
*   **隐喻**: “AI 的大脑/工作台”。
*   **功能**: 让用户看到 AI 正在做什么（增加信任感，减少等待焦虑）。
*   **视觉表现 (基于 ReactFlow 或 动态 SVG)**:
    *   **状态 1: 待机**: 显示呼吸动画的“核心球 (Core Orb)”。
    *   **状态 2: 正在识别**:
        *   显示上传的图片缩略图。
        *   扫描线动画扫过图片。
        *   浮现 OCR 碎片文字 (粒子效果)。
    *   **状态 3: 正在校准 (Agent Workflow)**:
        *   显示流程节点连线：`OCR` -> `Skill Lookup` -> `Check Database`。
        *   **关键动画**: 当 OCR 识别为“红火牛”时，显示一个搜索放大镜图标，连接到数据库图标，然后“吸”回标准词“红烧牛肉面”。
    *   **状态 4: 歧义求助**:
        *   节点变黄，弹出问号，指向左侧聊天栏。

### 1.3 右栏：智能表格区 (Smart Grid) - 40%
*   **隐喻**: “最终的工作成果”。
*   **组件**: 可编辑数据表格 (Editable Data Grid)。
*   **状态展示**:
    *   **普通态**: 黑字白底。
    *   **新增态**: 刚刚 AI 填入的行，背景淡绿色闪烁。
    *   **修改态**: 用户手动修改过的单元格，左上角红色小三角标记。
    *   **存疑态 (Ambiguous)**: 单元格背景淡黄色，点击弹出“候选下拉框”。
*   **操作**:
    *   顶部工具栏: `提交 (Submit)`, `清空 (Clear)`, `撤销 (Undo)`.
    *   支持 Excel 模式的快捷键 (Tab 切换, Enter 确认).

---

## 2. 核心交互流程 (Interaction Flows)

### 2.1 场景 A: 手写单据录入
1.  **用户**: 点击左侧“上传” -> 选择图片。
2.  **中栏**: 图片飞入，开始扫描。显示 `Processing: OCR...` -> `Processing: Validating with Database...`。
3.  **右栏**: 行数据逐行出现 (Stream 效果)。
4.  **校准**:
    *   如果某字段 AI 很有把握 (Confidence > 0.9): 直接填入。
    *   如果某字段 AI 不确定 (Confidence < 0.7): 单元格变黄，下拉框包含 Top-3 选项。
5.  **完成**: 中栏显示“Success”，右栏表格高亮。

### 2.2 场景 B: 语音修改
1.  **用户**: 按住麦克风说：“把第三行的数量改成 100”。
2.  **左栏**: 实时显示 ASR 文本。
3.  **中栏**: 显示 `Analyzing Intent...` -> 匹配到工具 `update_row(row=3, field='quantity', value=100)`。
4.  **右栏**: 第三行数量通过动画变为 100，背景闪烁一次。
5.  **左栏**: Agent 回复：“好的，已修改。”

### 2.3 场景 C: 歧义处理 (Human-in-the-loop)
1.  **系统**: OCR 无法区分“面”和“粉”，且 Skill 返回两者概率相近。
2.  **右栏**: 对应单元格显示 `?`。
3.  **左栏**: Agent 主动发问：“检测到第三项商品名称模糊，请确认是‘面’还是‘粉’？”
4.  **用户**: 语音回复“是面”。
5.  **系统**: 更新右栏单元格为“...面”，消除黄色警告。

---

## 3. 视觉规范 (Visual Style)
*   **配色**:
    *   Primary: `#1677FF` (科技蓝 - 选中/按钮)
    *   Success: `#52C41A` (新增/成功)
    *   Warning: `#FAAD14` (歧义/存疑)
    *   Background: `#F5F7FA` (浅灰底色)
    *   Card: `#FFFFFF` (卡片白)
*   **字体**: 系统默认无衬线字体 (Inter / PingFang SC)。
*   **动效**: 使用 Framer Motion 实现平滑的 Layout 切换和元素进出。

